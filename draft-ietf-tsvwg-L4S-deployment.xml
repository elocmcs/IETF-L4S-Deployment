<?xml version="1.0" encoding="US-ASCII"?>

<!-- 
     draft-rfcxml-general-template-annotated-00
  
     This template includes examples of most of the features of RFCXML with comments explaining 
     how to customise them, and examples of how to achieve specific formatting.
     
     Documentation is at https://authors.ietf.org/en/templates-and-schemas
-->
<?xml-model href="rfc7991bis.rnc"?>  <!-- Required for schema validation and schema-aware editing -->
<!-- <?xml-stylesheet type="text/xsl" href="rfc2629.xslt" ?> --> 
<!-- This third-party XSLT can be enabled for direct transformations in XML processors, including most browsers -->

<!DOCTYPE rfc [
  <!ENTITY nbsp    "&#160;">
  <!ENTITY zwsp   "&#8203;">
  <!ENTITY nbhy   "&#8209;">
  <!ENTITY wj     "&#8288;">
				]>

<!-- Extra statement used by XSLT processors to control the output style. -->
<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>
<!-- Processing Instructions- PIs (for a complete list and description,
     see file http://xml.resource.org/authoring/README.html.
     You may find that some sphisticated editors are not able to edit PIs when palced here.
     An alternative position is just inside the rfc elelment as noted below. -->
<!-- Some of the more generally applicable PIs that most I-Ds might want to use -->
<!-- Try to enforce the ID-nits conventions and DTD validity -->
<?rfc strict="yes" ?>
<!-- Items used when reviewing the document -->
<!-- Controls display of <cref> elements -->
<?rfc comments="yes" ?>
<!-- When no, put comments at end in comments section,
     otherwise, put inline -->
<?rfc inline="yes" ?>
<!-- When yes, insert editing marks: editing marks consist of a 
     string such as <29> printed in the blank line at the 
     beginning of each paragraph of text. -->
<?rfc editing="no" ?>
<!-- Create Table of Contents (ToC) and set some options for it.  
     Note the ToC may be omitted for very short documents,but idnits insists on a ToC 
     if the document has more than 15 pages. -->
<?rfc toc="yes"?>
<?rfc tocompact="yes"?>
<!-- If "yes" eliminates blank lines before main section entries. -->
<?rfc tocdepth="3"?>
<!-- Sets the number of levels of sections/subsections... in ToC.
   Can be overridden by 'toc="include"/"exclude"' on the section
   element-->
<!-- Choose the options for the references. 
     Some like symbolic tags in the references (and citations) and others prefer 
     numbers. The RFC Editor always uses symbolic tags.
     The tags used are the anchor attributes of the references. -->
<?rfc symrefs="yes"?>
<?rfc sortrefs="yes" ?>
<!-- If "yes", causes the references to be sorted in order of tags.
			 This doesn't have any effect unless symrefs is "yes"
          also. --> 
<!-- These two save paper: Just setting compact to "yes" makes savings by not starting each 
     main section on a new page but does not omit the blank lines between list items. 
     If subcompact is also "yes" the blank lines between list items are also omitted. -->
<?rfc compact="yes" ?>
<?rfc subcompact="no" ?>
<!-- end of list of popular I-D processing instructions -->

<!-- Information about the document.
     category values: std, bcp, info, exp, and historic
     For Internet-Drafts, specify attribute "ipr".
         original ipr values are: full3978, noModification3978, noDerivatives3978), 
         2008 IETF Trust versions: trust200811, noModificationTrust200811, noDerivativeTrust200811
         2009/Current: trust200902, noModificationTrust200902, noDerivativesTrust200902, pre5378Trust200902
     Also for Internet-Drafts, you must specify a value for attributes "docName" which is 
        typically the file name under which it is filed but need not be.
     If relevant, "iprExtract" may be specified to denote the anchor attribute value of a
        section that can be extracted for separate publication, it is only useful when the value
        of "ipr" does not give the Trust full rights.
     "updates" and "obsoletes" attributes can also be specified here, their arguments are
        comma-separated lists of RFC numbers (just the numbers) -->
<rfc
  xmlns:xi="http://www.w3.org/2001/XInclude"
  category="info"
  docName="draft-livingood-tsvwg-L4S-deployment"
  ipr="trust200902"
  obsoletes=""
  updates=""
  submissionType="IETF"
  xml:lang="en"
  version="3">


  <!-- ***** FRONT MATTER ***** -->

  <front>

    <title abbrev="ISP L4S Deployment Design">ISP L4S Deployment Design Recommendations</title>
    <seriesInfo name="Internet-Draft" value="draft-livingood-tsvwg-L4S-deployment-00"/>

    <!-- add 'role="editor"' below for the editors if appropriate -->
    <author fullname="Jason Livingood" initials="JL" surname="Livingood">
	   <organization>
           Comcast
       </organization>
      <address>
        <postal>
          <city>Philadelphia</city> <region>PA</region>
          <country>USA</country>
        </postal>
        <email>jason_livingood@comcast.com</email>
      </address>
    </author>

    <date month="August" day="17" year="2022"/>

    <!-- Meta-data Declarations -->
    <area>Transport</area>

    <!-- WG name at the upper left corner of the doc,
         IETF fine for individual submissions.  You can also
         omit this element in which case it defaults to "Network Working Group" -
         a hangover from the ancient history of the IETF! -->
    <workgroup>Transport Area Working Group</workgroup>

	<!-- You can add <keyword/> elements here.  They will be incorporated into HTML output
         files in a meta tag but they have no effect on text or nroff output. -->
	<!-- <keyword>Text</keyword> (as many of those elements as needed -->

	
    <abstract>
      <t>The IETF's Transport Area Working Group (TSVWG) has finalized experimental RFCs for Low Latency, 
      Low Loss, Scalable Throughput (L4S). These documents do a good job of describing the L4S architecture 
      and protocol but as is normal for many such standards, especially those in experimental status, 
      certain design decisions are ultimately left to implementers. This document explores the potential 
      implications of key deployment design decisions and makes recommendations for those decisions.</t>
    </abstract>

	<!-- Note here if needed
	   <note title=""><t> .... </t></note> -->
	
  </front>

  <middle>
    <section title="Introduction">
		    
	<t>The IETF's Transport Area Working Group (TSVWG) has finalized experimental RFCs for Low Latency, 
	Low Loss, Scalable Throughput (L4S)  <xref target="I-D.ietf-tsvwg-l4s-arch"/> 
	<xref target="I-D.ietf-tsvwg-aqm-dualq-coupled"/> <xref target="I-D.ietf-tsvwg-ecn-l4s-id"/> 
	<xref target="I-D.ietf-tsvwg-l4sops"/> <xref target="I-D.ietf-tsvwg-nqb"/> 
	<xref target="I-D.ietf-tsvwg-dscp-considerations"/>. These documents do a good job of describing 
	the L4S architecture and protocol but as is normal for many such standards, especially those in 
	experimental status, certain design decisions are ultimately left to implementers.</t>
	
	<t>This document explores the potential implications of key deployment design decisions and makes 
	recommendations for those decisions. In particular, there are best practices based on prior experience 
	as a network operator that should be considered and there are network neutrality types of considerations 
	as well. Technologies like L4S are benign on their own, but the way they are operationally implemented can 
	determine whether they are ultimately perceived positively and adopted by the broader Internet ecosystem. 
	That is a key issue with L4S, because the more applications developers and edge platforms that adopt it then 
	the greater the value to end users.</t> 
	
	<t>For additional background on latency and why is matters, please read <xref target="BITAG"/></t>
	  
    <!--  <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in
	  <xref target="RFC2119">RFC 2119</xref>.</t> -->

    </section>
    
    <section title="A New Understanding of Application Needs">
	    <t>In the course of working to improve the responsiveness of network protocols, the IETF 
		    concluded with the L4S standards that there were fundamentally two types of Internet traffic 
		    and that these two major traffic types needed a separate network processing queue in order to 
		    improve the way the Internet works.</t>
		    
		    <t>One of the two major traffic types is Queue Building (QB) - things like file downloads and 
			    backups that are designed to 
		    take up as much network capacity as possible but for which users are not interacting with in 
		    real-time. The other was Non-Queue Building (NQB) - such as DNS lookups, voice interaction 
		    with artificial intelligence (AI) assistants, video conferencing, gaming, and so on. The NQB 
		    flows tend to be limited in their capacity needs - for example a DNS lookup will not need to 
		    consume the full capacity of an end user's connection - but the end user is highly sensitive 
		    to any delays.</t>
		    
		    
			<t>Thus, the IETF created the L4S standards to specify how two separate network processing 
				queues can be designed and operated. Early results, such as from the IETF-114 hackathon 
				<xref target="IETF-114-Slides"/>, 
				demonstrate that L4S can work across a variety of access network technologies and deliver 
				extraordinary levels of responsiveness for many applications. It seems highly likely that 
				this new capability will enable entirely new classes of applications to become possible, 
				driving a wave of new Internet innovation.</t>
    </section>
    
    <section title="Network Neutrality and L4S">
	    <t>Network Neutrality (aka Net Neutrality, and NN hereafter) is a concept that can mean a variety 
	    of things in different countries, based on their laws and regulations. Generally speaking it has 
	    come to mean that Internet Service Providers (ISPs) should not block, throttle, or deprioritize 
	    lawful application traffic, should not engage in paid prioritization, and so on. The meaning of NN 
	    can be complex and ever changing, so the specific details are out of scope for this document.</t>
	    
	    <t>That being said, NN concerns certainly bear on the deployment of L4S by ISPs and so should be 
	    taken into account. It is also possible that there can be confusion over prioritization, provisioned 
	    end user throughput capacity, and low latency networking. As it is envisioned in the design of the 
	    protocol, the addition of a low latency packet processing queue at a network link is merely a second 
	    packet queue and does not mean that this queue is prioritized or that it has different or greater 
	    capacity from the classic queue. Thus, a low latency queue does not create a so-called "fast lane" - 
	    but there are other NN considerations in the operational implementation.</t>
	    
    
		<section title="Prioritization">
	    	<t>As noted above, a key aspect of NN goals is that traffic to certain Internet destinations or for certain 
		    applications should not be prioritized over other Internet traffic. L4S is fully consistent with this type 
		    of NN goal because it is designed so that all traffic is treated on a best efforts (BE) basis in the ISP 
		    access network and across any intervening network to the destination.</t>
    	</section>
    
		<section title="Thoughput">
	    	<t>L4S is also consistent with the NN goal of not creating a fast lane, because the same end user 
		    	throughput in an ISP access network is shared between classic and low latency queues. Thus, 
		    	applications do not get access to greater or different throughput depending on which queue they 
		    	choose to utilize.</t>
    	</section>
    	
    	<section title="A New Network Capability">
	    	<t>L4S represents a fundamental new network capability that applications can choose to utilize. It was 
		    	
	    	</t>
    	</section>
    
    
    </section>
    
    <section title="Recommended Deployment Design Decisions">
	    
	    <t>Like any network or system, a good deployment design and configuration matters and 
	    can be the difference between a well-functioning and accepted design and one that experiences 
	    problems and faces opposition. In the context of deploying L4S in an ISP network, 
	    this document describes some recommended deployment design decisions that should help 
	    to ensure an L4S deployment is resilient, well-accepted, and creates the environment for generating 
	    strong network effects.</t>
	    
   
    
    <section title="Only Applications Mark Traffic">
	    
	    <t>Only applications should mark traffic, not the network. This is for several reasons:</t>
	    <ul>
	    <li>According to the end-to-end principle, this function is best delegated to the edge of 
	    the network as an architectural best practice.</li>
	    <li>Application marking maintains the loose coupling between the application and network layers, 
	    eliminating the need for close coordination between networks and application developers.</li>
	    <li>Application developers know best whether their application will benefit from low latency and 
	    which aspects of their traffic flows will or will not benefit.</li>
	    <li>Application traffic is almost entirely encrypted, which makes it very difficult for networks 
	    to determine application protocols and to further infer which flows will benefit from low latency 
	    and which flows may be harmed because they need to build a queue.</li>
	    <li>Network operators and equipment vendors attempting to infer application type and application need 
	    will always make mistakes, incorrectly classifying traffic (REF TO NOTES) and potentially negatively 
	    affecting certain flows.</li>  
	    <li>The pace of innovation and iteration is necessarily faster-moving at the application edge at layer 7, 
	    rather than in the network at layer 3 where there is greater standards stability and a lower rate of 
	    major changes. As a result, the application layer is best suited to such experimentation. Network 
	    operators and equipment vendors trying to infer application needs will in addition always be in a reactive 
	    mode, one step behind changes made in applications.</li>
	    </ul>
	    
    </section>
    
    <section title="No Provider Payments"> 
	    
	    <t>There should be no edge provider payments for low latency marking by itself. A key point of NN 
	    sensitivity pertains to the potential gatekeeping and barrier to entry effects of payments from edge 
	    providers to ISPs for access to the low latency queue or other specialized services. This is because it 
	    can put the ISP in the role of being perceived as picking winners and losers in the application space but 
	    it can also create barriers to entry for new developers because established developers may be the only 
	    ones able to afford such payments.</t>
	    
	    <t>In addition, given that low latency marking will have strong network effects, any barriers to adoption 
	    such as this should be avoided in order to maximize the value to users and the network of a low latency 
	    queue.</t>
	    
    </section>
    
    <section title="All Providers Welcome"> 
	    
	    <t>Any provider should be able to mark their traffic for the low latency queue, with no restrictions 
	    other than standards compliance or other reasonable and openly documented technical guidelines. This 
	    maintains the loose cross-layer coupling that is a key tenet of the Internet's architecture by eliminating 
	    or greatly reducing any need for application providers and networks to coordinate on deployment (though 
	    such coordination is normal in the early experimental phase of any deployment).</t>
	    
	    <t>As noted above, this is another example that given low latency marking will have strong network 
	    effects, any barriers to adoption such as this should be avoided in order to maximize the value to users 
	    and the network of a low latency queue.</t> 
	    
    </section>
    
    <section title="Device Choice"> 
	    
	   <t>Both customer-owned and leased devices should be supported. This avoids the risk that an ISP can be 
	   perceived as giving preference to their own devices, which may carry some monthly recurring fee or other 
	   cost. It also ensures the broadest possible base of adoption, driving network effects.</t>
	   
    </section>
    
    <section title="User Choice">
	    <t>Users should have a mechanism to opt out of low latency networking. If low latency 
	    networking is working correctly, it seems unlikely that a user should ever want or need to turn it 
	    off. But is is also possible it may be desirable in some troubleshooting situations or even in cases 
	    where a particular application that a user depends upon has not implemented low latency networking 
	    correctly and so the user wishes to turn it off until the developer can fix the problem. That being said, 
	    following the experimental phase there may no longer be a need or practical benefit to having an opt out 
	    mechanism.</t>
	    
    </section>
    
  
 </section>
  
 <section title="Summary of Recommended Deployment Design Decisions">
	 
	 <ol type="%d">
		 
	 	<li>Only Applications Mark Traffic: Not the network</li>
	 	<li>No Provider Payments: No edge provider payments for low latency marking</li>
	 	<li>All Providers Welcome: Any provider can mark with no restrictions other than standards compliance or other reasonable and openly documented technical guidelines</li>
	 	<li>Device Choice: Both customer-owned and leased devices supported</li>
	 	<li>User Choice: Customers can opt out during the experimental phase</li>

	 </ol>
	 
	 
 </section>
 
    <section title="Acknowledgements">
      <t>Thanks to Bob Briscoe, Sebnem Ozer, and Greg White for their review and feedback on this document.</t>
	</section>

    <section title="IANA Considerations">
	  <t>RFC Editor: Please remove this section before
		 publication.</t>
      <t>This memo includes no requests to or actions for IANA.</t>
    </section>

    <section title="Security Considerations">
	  <t>RFC Editor: Please remove this section before
		 publication.</t>
      <t>This memo includes no security considerations.</t>
    </section>
    
    <section title="Revision History">
	  <t>RFC Editor: Please remove this section before
		 publication.</t>
      <t>v00: First draft</t>
      <t>v01: ...</t>
    </section>
    
    <section title="Open Issues">
	  <t>RFC Editor: Please remove this section before
		 publication.</t>
      <t>- Open issues are being tracked in a GitHub repository for this document 
	      at https://github.com/jlivingood/IETF-L4S-Deployment/issues</t>
    </section>
    
    
  </middle>

  <!--  *****BACK MATTER ***** -->

  <back>
    <!-- References split to informative and normative -->

   <references title="Informative References">
	   <xi:include href="https://bib.ietf.org/public/rfc/bibxml3/reference.I-D.ietf-tsvwg-l4s-arch.xml"/>
	   <xi:include href="https://bib.ietf.org/public/rfc/bibxml3/reference.I-D.ietf-tsvwg-aqm-dualq-coupled.xml"/>
	   <xi:include href="https://bib.ietf.org/public/rfc/bibxml3/reference.I-D.ietf-tsvwg-ecn-l4s-id.xml"/>
	   <xi:include href="https://bib.ietf.org/public/rfc/bibxml3/reference.I-D.ietf-tsvwg-l4sops.xml"/>
	   <xi:include href="https://bib.ietf.org/public/rfc/bibxml3/reference.I-D.ietf-tsvwg-nqb.xml"/>
	   <xi:include href="https://bib.ietf.org/public/rfc/bibxml3/reference.I-D.ietf-tsvwg-dscp-considerations.xml"/>
	   
	   <reference anchor="BITAG" target="https://bitag.org/documents/BITAG_latency_explained.pdf">
		   <front>
            <title>Latency Explained</title>
            <author>
              <organization>Broadband Internet Technical Advisory Group</organization>
            </author>
            <date year="2022" month="January" day="10"/>
		   </front>
	   </reference>
	   
	   <reference anchor="IETF-114-Slides" target="https://datatracker.ietf.org/meeting/114/materials/slides-114-tsvwg-update-on-l4s-work-in-ietf-114-hackathon-00.pdf">
		   <front>
            <title>First L4S Interop Event @ IETF Hackathon</title>
            <author fullname="Greg White" initials="GW" surname="White">
              <organization>CableLabs</organization>
            </author>
            <date year="2022" month="July" day="25"/>
		   </front>
		   
	   </reference>
	   
   </references>

  </back>
</rfc>
